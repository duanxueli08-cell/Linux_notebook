#### 扩展芝士

##### 镜像打包

```powershell
前言：
	将主机A中的镜像打包传给主机B ；主机B加载镜像包
方法一：
# 打包镜像为 tar 文件
docker save -o jumpserver-v4.10.12.tar 63eaf6028b7b
# 查看打包的文件
ls -lh jumpserver-v4.10.12.tar
# 传输文件到目标主机
scp jumpserver-v4.10.12.tar 10.0.0.201:/root
# 在目标主机上加载镜像
docker load -i jumpserver-v4.10.12.tar
# 验证镜像
docker images | grep jumpserver
# 为镜像打上名称和标签
docker tag 63eaf6028b7b jumpserver:v4.10.12
——————分割线——————
方法二：
# 打包并压缩
docker save jumpserver/jms_all:v4.10.12 | gzip > jumpserver-v4.10.12.tar.gz
#　传输压缩文件
scp jumpserver-v4.10.12.tar.gz user@target-host:/path/
# 在目标主机加载（也可以先解压再加载）
docker load -i jumpserver-v4.10.12.tar.gz
# 检查镜像ID是否一致
docker images --no-trunc | grep 63eaf6028b7b
——————分割线——————
# vim编辑器中查看隐藏字符
:set list
```


##### 离线下载安装软件包

```powershell
# 在 A 主机上先下载但不安装
apt download maven
# 拷贝 deb 包到 B 主机
scp maven_3.8.7-2_all.deb  10.0.0.200:/root/
# 在 B 主机上安装
dpkg -i maven_3.8.7-2_all.deb
# 如果出现依赖问题，运行以下命令修复
sudo apt-get install -f
# 检查 Maven 版本
mvn -version
# 检查安装路径
which mvn
```

##### 指令

```powershell
# 导出/导入镜像（离线迁移）
docker save -o [文件名].tar [镜像名]:[标签]
docker load -i [文件名].tar
# 为镜像打上名称和标签
docker tag 63eaf6028b7b jumpserver:v4.10.12
# 查看文件数量，以及文件中有多少行
root@ubuntu2404-203:~# find RuoYi/  -name  "*.java" | wc -l
271
root@ubuntu2404-203:~# find RuoYi/  -name  "*.java" | xargs cat | wc -l
35992
# 显示当前用户的所有资源限制;
ulimit -a 
# 对于传统方式（绝对路径启动关闭）编辑limits.conf
tail -n2 /etc/security/limits.conf 
root soft nofile 66666
root hard nofile 66666
# 对于主流方式（systemctl启动关闭）编辑ruoyi.service文件
cat /lib/systemd/system/ruoyi.service  | grep LimitNOFILE
LimitNOFILE=10000
# 查看服务进程优化数据（根据进程id查询）
ss -tunlp 
cat /proc/1129/limits
# harbor登陆
docker login harbor.wang.org -u magedu -p Magedu123

```

##### lrzsz

```powershell
sudo apt install lrzsz
```

常用指令
```Python
update-alternatives --config java

```