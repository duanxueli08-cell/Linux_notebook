{
	"nodes":[
		{"id":"1485676266e6e4a9","type":"text","text":"Kubernetes ç»„ä»¶è‡ªæˆ‘é…ç½®ã€ç”Ÿæˆè¯ä¹¦å’Œé…ç½®æ–‡ä»¶çš„æœºåˆ¶\n\nå¥½ï¼Œä½ é—®çš„å…¶å®æ˜¯ **Kubernetes ç»„ä»¶è‡ªæˆ‘é…ç½®ã€ç”Ÿæˆè¯ä¹¦å’Œé…ç½®æ–‡ä»¶çš„æœºåˆ¶**ï¼Œè¿™æ˜¯æ•´ä¸ªé›†ç¾¤å¯åŠ¨å’Œè¿è¡Œçš„æ ¸å¿ƒæµç¨‹ã€‚æˆ‘ä»¬å¯ä»¥ä»ä¸‰ä¸ªç»´åº¦æ¥æ¢³ç†ï¼š**ä½•æ—¶ç”Ÿæˆã€ç”±è°ç”Ÿæˆã€æ”¾å“ªå„¿ã€ä½œç”¨**ã€‚æˆ‘å¸®ä½ ç”»ä¸€å¹…æ¸…æ™°çš„è„‘å›¾å¼ç†è§£ã€‚\n\n---\n\n## 1ï¸âƒ£ kubeadm åˆå§‹åŒ–é˜¶æ®µï¼ˆ`kubeadm init`ï¼‰\n\nå½“ä½ ç”¨ `kubeadm init` åˆå§‹åŒ– master èŠ‚ç‚¹æ—¶ï¼Œå®ƒä¼šåšå¾ˆå¤šäº‹ï¼ŒåŒ…æ‹¬ç”Ÿæˆè¯ä¹¦å’Œ kubeconfig é…ç½®æ–‡ä»¶ï¼š\n\n### 1.1 è¯ä¹¦ç”Ÿæˆæœºåˆ¶\n\n- **ç”Ÿæˆå·¥å…·**ï¼š`kubeadm` å†…éƒ¨è°ƒç”¨ `cfssl`ï¼ˆCloudFlare SSLï¼‰ç”Ÿæˆè¯ä¹¦ã€‚\n    \n- **ç”Ÿæˆä½ç½®**ï¼š\n    \n    - é»˜è®¤åœ¨ `/etc/kubernetes/pki/` ä¸‹ï¼š\n        \n        ```\n        ca.crt          # CA è¯ä¹¦\n        ca.key          # CA ç§é’¥\n        apiserver.crt   # kube-apiserver æœåŠ¡ç«¯è¯ä¹¦\n        apiserver.key\n        apiserver-kubelet-client.crt  # kube-apiserver è¿æ¥ kubelet ç”¨\n        etcd/           # etcd çš„è¯ä¹¦å’Œå¯†é’¥\n        sa.pub / sa.key # ServiceAccount ç”¨çš„ key\n        ```\n        \n- **ä½œç”¨**ï¼š\n    \n    - **API Server**ï¼šä½¿ç”¨è‡ªå·±çš„è¯ä¹¦å¯¹å¤–æä¾› HTTPS\n        \n    - **ETCD**ï¼šåŒå‘ TLS é€šä¿¡\n        \n    - **ç»„ä»¶é—´é€šä¿¡**ï¼ˆapiserver â†” kubelet â†” controller-manager â†” schedulerï¼‰å…¨é è¿™äº›è¯ä¹¦\n        \n\n### 1.2 kubeconfig ç”Ÿæˆæœºåˆ¶\n\n- **ç”Ÿæˆå·¥å…·**ï¼š`kubeadm` ä¼šè°ƒç”¨ `kubectl config` å‘½ä»¤æ¨¡æ¿ç”Ÿæˆ\n    \n- **ç”Ÿæˆä½ç½®**ï¼š\n    \n    - `/etc/kubernetes/admin.conf` â†’ kube-apiserverã€controller-managerã€scheduler ä½¿ç”¨\n        \n    - `/etc/kubernetes/kubelet.conf` â†’ kubelet ä½¿ç”¨\n        \n    - `/etc/kubernetes/controller-manager.conf` â†’ controller-manager ä½¿ç”¨\n        \n    - `/etc/kubernetes/scheduler.conf` â†’ scheduler ä½¿ç”¨\n        \n- **ä½œç”¨**ï¼š\n    \n    - é‡Œé¢åŒ…å«äº† API Server åœ°å€ã€CA è¯ä¹¦ã€å®¢æˆ·ç«¯è¯ä¹¦ã€token ç­‰\n        \n    - ç”¨æ¥è®©ç»„ä»¶äº’ç›¸è®¤è¯è®¿é—® API Server\n        \n\n---\n\n## 2ï¸âƒ£ kubelet é…ç½®å’Œå¯åŠ¨\n\n- kubelet å¯åŠ¨æ—¶ä¼šè¯»å– `/var/lib/kubelet/kubeadm-flags.env` æˆ–å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šçš„é…ç½®ã€‚\n    \n- kubelet ä¼šæ ¹æ® kubeconfig ä¸ API Server å»ºç«‹å®‰å…¨è¿æ¥ã€‚\n    \n- å¦‚æœ `--bootstrap-kubeconfig` æä¾›ï¼Œkubelet å¯ä»¥è‡ªåŠ¨å‘ API Server è¯·æ±‚è¯ä¹¦ï¼ˆCSR ç­¾å‘ï¼‰ï¼Œç”¨äºèŠ‚ç‚¹è®¤è¯ï¼š\n    \n    ```\n    kubelet â†’ CSR â†’ kube-apiserver â†’ ç­¾å‘ â†’ kubelet ä¿å­˜åˆ° /var/lib/kubelet/pki/kubelet.crt\n    ```\n    \n- **æœºåˆ¶è¯´æ˜**ï¼š\n    \n    - è¿™ä¸ªæœºåˆ¶å« **Kubelet TLS Bootstrap**\n        \n    - ä¿è¯èŠ‚ç‚¹å¯ä»¥åŠ¨æ€åŠ å…¥é›†ç¾¤ï¼Œä¸ç”¨æ‰‹åŠ¨ä¸‹å‘è¯ä¹¦\n        \n\n---\n\n## 3ï¸âƒ£ å„ç»„ä»¶å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®\n\n|ç»„ä»¶|é…ç½®æ–‡ä»¶/è¯ä¹¦|ç”Ÿæˆæ–¹å¼|ä½ç½®|ä½œç”¨|\n|---|---|---|---|---|\n|kube-apiserver|admin.conf, apiserver.crt/key, etcdè¯ä¹¦|kubeadm `init`|`/etc/kubernetes/`|æä¾› API Server HTTPS æœåŠ¡ï¼Œç»„ä»¶é—´è®¤è¯|\n|kube-controller-manager|controller-manager.conf, client cert|kubeadm|`/etc/kubernetes/`|è®¿é—® API Server åšæ§åˆ¶å¾ªç¯|\n|kube-scheduler|scheduler.conf|kubeadm|`/etc/kubernetes/`|è®¿é—® API Server åšè°ƒåº¦|\n|kubelet|kubelet.conf, node CSR, node.crt/key|kubeadm + TLS bootstrap|`/var/lib/kubelet/`|ä¸ API Server å®‰å…¨é€šä¿¡|\n|kube-proxy|kube-proxy.conf|kubeadm|`/var/lib/kube-proxy/`|è¯»å– API Server ç”Ÿæˆ iptables / IPVS è§„åˆ™|\n\n> ğŸ”‘ æ³¨æ„ï¼š**kubeadm ç”Ÿæˆçš„æ–‡ä»¶å¯ä»¥è¦†ç›–é»˜è®¤è·¯å¾„**ï¼Œæ‰€ä»¥ kubelet å…ˆå» `/etc/kubernetes/`ï¼Œå†å» `$HOME/.kube/config` æŸ¥æ‰¾ã€‚\n\n---\n\n## 4ï¸âƒ£ å·¥ä½œæœºåˆ¶æ€»ç»“\n\n1. **åˆå§‹åŒ–é˜¶æ®µ**ï¼š`kubeadm init` ç”Ÿæˆè¯ä¹¦ + kubeconfig æ–‡ä»¶ + etcd é…ç½®ã€‚\n    \n2. **ç»„ä»¶å¯åŠ¨**ï¼šç»„ä»¶è¯»å–å¯¹åº”é…ç½®å’Œè¯ä¹¦ï¼Œä¿è¯å®‰å…¨é€šä¿¡ã€‚\n    \n3. **èŠ‚ç‚¹åŠ¨æ€åŠ å…¥**ï¼š\n    \n    - kubelet å¯ä»¥ç”¨ TLS bootstrap è‡ªåŠ¨è¯·æ±‚è¯ä¹¦\n        \n    - admin å¯ä»¥ç”¨ token + CA hash è®©æ–°èŠ‚ç‚¹åŠ å…¥\n        \n4. **æ–‡ä»¶è¦†ç›–ä¸å±‚çº§**ï¼š\n    \n    - ç»„ä»¶ä¼˜å…ˆè¯»å– `/etc/kubernetes/*.conf`ï¼Œæ²¡æœ‰æ—¶æ‰ç”¨é»˜è®¤è·¯å¾„\n        \n    - kubelet TLS bootstrap ä¼šå†™åˆ° `/var/lib/kubelet/pki/`\n        \n\n---\n\næˆ‘å¯ä»¥å¸®ä½ ç”»ä¸€å¼  **K8s å„ç»„ä»¶è¯ä¹¦å’Œ kubeconfig çš„ç”Ÿæˆä¸ä½¿ç”¨æµç¨‹å›¾**ï¼ŒæŠŠæ‰€æœ‰è·¯å¾„ã€ç»„ä»¶å’Œé¡ºåºéƒ½ç”»æ¸…æ¥šï¼Œè¿™æ ·ä½ ä»¥åæ’é”™å°±åƒçœ‹åœ°å›¾ä¸€æ ·ç›´è§‚ã€‚\n\nä½ æƒ³è®©æˆ‘ç”»å—ï¼Ÿ","x":1120,"y":-440,"width":850,"height":1120},
		{"id":"58ea350a8aa0f774","type":"text","text":"\n\nåŸºäº containerd çš„ Kubernetes å®‰è£…æµç¨‹å›¾**ï¼ŒåŒ…æ‹¬è¯ä¹¦ã€CNI æ’ä»¶ã€é…ç½®æ–‡ä»¶ä½ç½®ã€é‡è¦ç›®å½•ç­‰ç­‰ã€‚ä¸‹é¢æˆ‘å…ˆç»™ä½ æ•´ç†ä¸€ä»½è¯¦ç»†é€»è¾‘ï¼Œç„¶åå¯ä»¥ç”Ÿæˆæµç¨‹å›¾ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä¼šæŒ‰ç…§**å‡†å¤‡ç¯å¢ƒ â†’ å®‰è£… containerd â†’ å®‰è£… kubeadm/kubelet/kubectl â†’ åˆå§‹åŒ–æ§åˆ¶å¹³é¢ â†’ é…ç½®ç½‘ç»œ â†’ åŠ å…¥èŠ‚ç‚¹ â†’ æ—¥å¸¸ç›®å½•/æ–‡ä»¶è¯´æ˜**çš„æµç¨‹æ¥è¯´æ˜ã€‚\n\n---\n\n## **Kubernetes åŸºäº Containerd å®‰è£…å®Œæ•´æµç¨‹ï¼ˆå«é‡è¦æ–‡ä»¶å’Œç›®å½•ï¼‰**\n\n### **1ï¸âƒ£ ç¯å¢ƒå‡†å¤‡**\n\n- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu 22.04 / Rocky 9\n    \n- **ç”¨æˆ·æƒé™**ï¼šroot æˆ– sudo\n    \n- **å…³é—­ Swap**\n    \n\n```bash\nswapoff -a\nsed -i '/ swap / s/^/#/' /etc/fstab\n```\n\n- **å†…æ ¸å‚æ•°é…ç½®**\n    \n\n```bash\ncat <<EOF | tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n\nmodprobe overlay\nmodprobe br_netfilter\n\ncat <<EOF | tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nEOF\n\nsysctl --system\n```\n\n- **æ—¶é—´åŒæ­¥ã€ä¸»æœºåã€hosts é…ç½®**\n    \n\n```bash\nhostnamectl set-hostname master1\necho \"10.0.0.101 master1\" >> /etc/hosts\necho \"10.0.0.102 node1\" >> /etc/hosts\n```\n\n- **ç¦ç”¨é˜²ç«å¢™æˆ–å…è®¸å¿…è¦ç«¯å£**\n    \n    - K8s æ§åˆ¶å¹³é¢ç«¯å£ï¼š6443ã€2379-2380ã€10250ã€10251ã€10252\n        \n    - Flannel ç½‘ç»œç«¯å£ï¼š8472/UDP (VXLAN)\n        \n    - æ ¹æ®å®é™…éœ€æ±‚é…ç½®é˜²ç«å¢™/iptables\n        \n\n---\n\n### **2ï¸âƒ£ å®‰è£… containerd**\n\n- **å®‰è£… containerd**\n    \n\n```bash\napt update\napt install -y containerd\n```\n\n- **ç”Ÿæˆé»˜è®¤é…ç½®**\n    \n\n```bash\nmkdir -p /etc/containerd\ncontainerd config default > /etc/containerd/config.toml\n```\n\n- **é…ç½® systemd cgroup**\n    \n\n```toml\n# /etc/containerd/config.toml\n[plugins.\"io.containerd.grpc.v1.cri\".containerd.runtimes.runc]\n  [plugins.\"io.containerd.grpc.v1.cri\".containerd.runtimes.runc.options]\n    SystemdCgroup = true\n```\n\n- **å¯åŠ¨ containerd**\n    \n\n```bash\nsystemctl restart containerd\nsystemctl enable containerd\n```\n\n---\n\n### **3ï¸âƒ£ å®‰è£… Kubernetes ç»„ä»¶**\n\n- **æ·»åŠ  Kubernetes è½¯ä»¶æº**\n    \n\n```bash\napt update && apt install -y apt-transport-https ca-certificates curl\ncurl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -\ncat <<EOF | tee /etc/apt/sources.list.d/kubernetes.list\ndeb https://apt.kubernetes.io/ kubernetes-xenial main\nEOF\n\napt update\napt install -y kubeadm kubelet kubectl\napt-mark hold kubeadm kubelet kubectl\n```\n\n---\n\n### **4ï¸âƒ£ åˆå§‹åŒ–æ§åˆ¶å¹³é¢ï¼ˆmasterï¼‰**\n\n- **é…ç½® kubeadm init**\n    \n\n```bash\nkubeadm init \\\n  --apiserver-advertise-address=10.0.0.101 \\\n  --control-plane-endpoint=kubeapi.mydomain.com \\\n  --pod-network-cidr=10.244.0.0/16 \\\n  --service-cidr=10.96.0.0/12 \\\n  --kubernetes-version=v1.34.1 \\\n  --image-repository=registry.aliyuncs.com/google_containers\n```\n\n- **åˆå§‹åŒ–å®Œæˆåä¿å­˜è¯ä¹¦å’Œ kubeconfig æ–‡ä»¶**\n    \n    - **è¯ä¹¦ç›®å½•**ï¼š`/etc/kubernetes/pki/`\n        \n        - `ca.crt` / `ca.key` â†’ Kubernetes æ ¹è¯ä¹¦\n            \n        - `apiserver.crt` / `apiserver.key` â†’ API Server\n            \n        - `apiserver-kubelet-client.crt` / `.key` â†’ API Server ä¸ kubelet é€šä¿¡\n            \n        - `etcd/` â†’ etcd è¯ä¹¦å’Œç§é’¥\n            \n    - **kubeconfig æ–‡ä»¶**\n        \n        - `/etc/kubernetes/admin.conf` â†’ ç®¡ç† kubeconfig\n            \n        - `/etc/kubernetes/kubelet.conf` â†’ kubelet é…ç½®\n            \n        - `/etc/kubernetes/controller-manager.conf`\n            \n        - `/etc/kubernetes/scheduler.conf`\n            \n\n---\n\n### **5ï¸âƒ£ é…ç½® CNI ç½‘ç»œï¼ˆFlannelï¼‰**\n\n- **Flannel å®‰è£…**\n    \n\n```bash\nkubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml\n```\n\n- **é‡è¦ç›®å½•**\n    \n    - CNI é…ç½®ï¼š`/etc/cni/net.d/`\n        \n    - CNI äºŒè¿›åˆ¶ï¼š`/opt/cni/bin/`\n        \n    - Flannel é…ç½®ï¼š`/etc/kubernetes/manifests/kube-flannel.yaml`ï¼ˆé™æ€ Podï¼‰\n        \n- **ç½‘ç»œ CIDR å¿…é¡»ä¸ `kubeadm init` çš„ `--pod-network-cidr` ä¸€è‡´**\n    \n\n---\n\n### **6ï¸âƒ£ åŠ å…¥ Node èŠ‚ç‚¹**\n\n- **ç”Ÿæˆ join å‘½ä»¤**ï¼ˆmaster è¾“å‡ºï¼‰ï¼š\n    \n\n```bash\nkubeadm token create --print-join-command\n```\n\n- **åœ¨ node ä¸Šæ‰§è¡Œ join**\n    \n\n```bash\nkubeadm join 10.0.0.101:6443 \\\n  --token <token> \\\n  --discovery-token-ca-cert-hash sha256:<hash>\n```\n\n---\n\n### **7ï¸âƒ£ æ—¥å¸¸æ–‡ä»¶/ç›®å½•è¯´æ˜**\n\n|ç›®å½•/æ–‡ä»¶|ä½œç”¨|\n|---|---|\n|`/etc/kubernetes/pki/`|æ‰€æœ‰æ§åˆ¶å¹³é¢è¯ä¹¦|\n|`/etc/kubernetes/admin.conf`|kubectl admin kubeconfig|\n|`/etc/kubernetes/kubelet.conf`|kubelet çš„ kubeconfig|\n|`/etc/kubernetes/manifests/`|é™æ€ Pod é…ç½®ï¼Œmaster å¯åŠ¨æ—¶è‡ªåŠ¨éƒ¨ç½²|\n|`/etc/cni/net.d/`|CNI ç½‘ç»œé…ç½®æ–‡ä»¶|\n|`/opt/cni/bin/`|CNI æ’ä»¶äºŒè¿›åˆ¶æ–‡ä»¶|\n|`/var/lib/kubelet/`|kubelet æ•°æ®|\n|`/var/lib/etcd/`|etcd æ•°æ®|\n|`/var/lib/cni/`|CNI çŠ¶æ€æ–‡ä»¶|\n|`/var/run/containerd/`|containerd socket|\n\n---\n\n### **8ï¸âƒ£ æµç¨‹å›¾æ¦‚å¿µç»“æ„**\n\n```\n[ç¯å¢ƒå‡†å¤‡]\n      |\n      v\n[å®‰è£… containerd] -> é…ç½® systemd cgroup\n      |\n      v\n[å®‰è£… kubeadm/kubelet/kubectl]\n      |\n      v\n[åˆå§‹åŒ– master]\n      |----> /etc/kubernetes/pki/ (è¯ä¹¦)\n      |----> /etc/kubernetes/admin.conf (kubeconfig)\n      |\n      v\n[éƒ¨ç½² CNI ç½‘ç»œ (Flannel)]\n      |----> /etc/cni/net.d/\n      |----> /opt/cni/bin/\n      |\n      v\n[Node èŠ‚ç‚¹åŠ å…¥]\n      |\n      v\n[Kubernetes é›†ç¾¤å°±ç»ª]\n```\n\n---\n\nå¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ **ç›´æ¥ç”Ÿæˆä¸€å¼ å¯è§†åŒ–çš„æµç¨‹å›¾**ï¼ŒæŠŠæ¯ä¸€æ­¥çš„ç›®å½•ã€è¯ä¹¦ã€é…ç½®æ–‡ä»¶éƒ½æ ‡æ³¨æ¸…æ¥šï¼Œçœ‹ä¸Šå»åƒçœŸæ­£çš„è¿ç»´æ‰‹å†Œå›¾è§£ã€‚\n\nä½ å¸Œæœ›æˆ‘å¸®ä½ ç”»å—ï¼Ÿ","x":2060,"y":-440,"width":840,"height":1120},
		{"id":"9b2cb9180ea9ea99","type":"text","text":"\n## ä¸€ã€å­¦ä¹ æ€»åŸåˆ™ï¼ˆå…ˆç«‹è§„çŸ©ï¼‰\n\nå…ˆæŠŠè¿™ 4 æ¡åˆ»åœ¨è„‘å­é‡Œ ğŸ‘‡\n\n1ï¸âƒ£ **æ°¸è¿œå…ˆç†è§£æ¶æ„ï¼Œå†æ•²å‘½ä»¤**  \n2ï¸âƒ£ **æ¯å­¦ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½é—® 3 ä¸ªé—®é¢˜**\n\n- å®ƒè§£å†³ä»€ä¹ˆé—®é¢˜\n    \n- å®ƒå’Œè°äº¤äº’\n    \n- å®ƒæŒ‚äº†ä¼šå‘ç”Ÿä»€ä¹ˆ\n    \n\n3ï¸âƒ£ **å¿…é¡»æœ‰å®éªŒç¯å¢ƒï¼ˆè‡³å°‘ 3 èŠ‚ç‚¹ï¼‰**  \n4ï¸âƒ£ **æ¯ä¸€é˜¶æ®µï¼Œéƒ½èƒ½æ€»ç»“æˆâ€œé¢è¯•ç­”æ¡ˆâ€**\n\n---\n\n## äºŒã€Kubernetes å­¦ä¹ æ€»æ¡†æ¶ï¼ˆä» 0 â†’ å°±ä¸šï¼‰\n\n### ğŸ§± ç¬¬ä¸€é˜¶æ®µï¼šK8s åŸºç¡€åœ°åŸºï¼ˆå¿…è¿‡å…³ï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ èƒ½æŠŠ K8s ç”»å‡ºæ¥**\n\n#### 1ï¸âƒ£ å®¹å™¨ & åŸºç¡€å‰ç½®\n\n> ä½ å¤§éƒ¨åˆ†å·²ç»åœ¨è·¯ä¸Šäº†ï¼Œä½†æˆ‘ç»™ä½ ä¸€ä¸ªâ€œè¿ç»´ç‰ˆé‡ç‚¹â€\n\n- Linux Namespace / Cgroupï¼ˆ**é‡ç‚¹ç†è§£ï¼Œä¸æ˜¯èƒŒ**ï¼‰\n    \n- å®¹å™¨è¿è¡Œæ—¶\n    \n    - containerdï¼ˆä¸»æµï¼‰\n        \n    - CRI æ˜¯ä»€ä¹ˆ\n        \n- é•œåƒã€ä»“åº“ã€ç§æœ‰ Harbor\n    \n\nğŸ“Œ é¢è¯•å…³é”®ä¸€å¥è¯\n\n> â€œK8s æœ¬èº«ä¸è·‘å®¹å™¨ï¼Œå®ƒé€šè¿‡ CRI è°ƒç”¨ containerdâ€\n\n---\n\n### ğŸ§  ç¬¬äºŒé˜¶æ®µï¼šK8s æ¶æ„æ ¸å¿ƒï¼ˆé‡ä¸­ä¹‹é‡ï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ çŸ¥é“æ¯ä¸ªç»„ä»¶â€œä¸ºä»€ä¹ˆå­˜åœ¨â€**\n\n#### 2ï¸âƒ£ K8s æ•´ä½“æ¶æ„\n\n- Control Plane\n    \n    - kube-apiserverï¼ˆå”¯ä¸€å…¥å£ï¼‰\n        \n    - etcdï¼ˆä¸€è‡´æ€§å­˜å‚¨ï¼‰\n        \n    - scheduler\n        \n    - controller-manager\n        \n- Node\n    \n    - kubelet\n        \n    - kube-proxy\n        \n    - container runtime\n        \n\nğŸ“Œ å¿…é¡»ä¼šç”»ï¼š  \n**â€œåˆ›å»º Pod çš„å®Œæ•´æµç¨‹å›¾â€**\n\n---\n\n### ğŸ“¦ ç¬¬ä¸‰é˜¶æ®µï¼šPod & åŸºç¡€èµ„æºå¯¹è±¡ï¼ˆå¤©å¤©æ‰“äº¤é“ï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ å¯¹ Pod éå¸¸æ•æ„Ÿ**\n\n#### 3ï¸âƒ£ Pod ä½“ç³»ï¼ˆé‡ç‚¹ï¼‰\n\n- Pod æœ¬è´¨\n    \n- Pause å®¹å™¨ä½œç”¨\n    \n- Pod ç”Ÿå‘½å‘¨æœŸ\n    \n    - PodPhase\n        \n    - PodCondition\n        \n- å®¹å™¨çŠ¶æ€ vs Pod çŠ¶æ€\n    \n- Init å®¹å™¨\n    \n- æ¢é’ˆ\n    \n    - liveness\n        \n    - readiness\n        \n    - startup\n        \n\nğŸ“Œ é¢è¯•æ€æ‹›\n\n> â€œPod æ˜¯è°ƒåº¦æœ€å°å•ä½ï¼Œä¸æ˜¯å®¹å™¨â€\n\n---\n\n### ğŸ§© ç¬¬å››é˜¶æ®µï¼šæ§åˆ¶å™¨ï¼ˆæ ¸å¿ƒèƒ½åŠ›åˆ†æ°´å²­ï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ çŸ¥é“ Pod æ˜¯â€œè¢«è°ç®¡ç€çš„â€**\n\n#### 4ï¸âƒ£ æ§åˆ¶å™¨å¯¹è±¡\n\n- ReplicaSet\n    \n- Deploymentï¼ˆé‡ç‚¹ï¼‰\n    \n- DaemonSet\n    \n- StatefulSet\n    \n- Job / CronJob\n    \n\nğŸ“Œ å¿…é¡»ææ¸…æ¥šï¼š\n\n- ä¸ºä»€ä¹ˆ Deployment ä¸ç›´æ¥ç®¡ Pod\n    \n- StatefulSet è§£å†³äº†ä»€ä¹ˆé—®é¢˜\n    \n\n---\n\n### ğŸŒ ç¬¬äº”é˜¶æ®µï¼šæœåŠ¡å‘ç° & ç½‘ç»œï¼ˆæœ€å®¹æ˜“ç¿»è½¦ï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ ä¸æ€•ç½‘ç»œé¢è¯•**\n\n#### 5ï¸âƒ£ Service & ç½‘ç»œ\n\n- Service ç±»å‹\n    \n    - ClusterIP\n        \n    - NodePort\n        \n    - LoadBalancer\n        \n- Endpoint / EndpointSlice\n    \n- kube-proxy\n    \n    - iptables\n        \n    - ipvs\n        \n- CNI æ’ä»¶\n    \n    - Flannel\n        \n    - Calicoï¼ˆé‡ç‚¹ï¼‰\n        \n\nğŸ“Œ é¢è¯•é«˜é¢‘\n\n> â€œPod IP èƒ½ä¸èƒ½ç›´æ¥è®¿é—®ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿâ€\n\n---\n\n### ğŸ—‚ ç¬¬å…­é˜¶æ®µï¼šå­˜å‚¨ï¼ˆè¿ç»´å¿…ä¼šï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ èƒ½æ”¯æ’‘æœ‰çŠ¶æ€ä¸šåŠ¡**\n\n#### 6ï¸âƒ£ å­˜å‚¨ä½“ç³»\n\n- Volume\n    \n- PV / PVC\n    \n- StorageClass\n    \n- æœ¬åœ°å­˜å‚¨ vs ç½‘ç»œå­˜å‚¨\n    \n- StatefulSet + PVC ç»‘å®šå…³ç³»\n    \n\nğŸ“Œ ä¸€å¥è¯æ€»ç»“\n\n> â€œPVC æ˜¯å£°æ˜ï¼ŒPV æ˜¯èµ„æºï¼ŒSC æ˜¯åŠ¨æ€å·¥å‚â€\n\n---\n\n### ğŸ” ç¬¬ä¸ƒé˜¶æ®µï¼šé…ç½® & æƒé™ï¼ˆä¼ä¸šçº§ï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ èƒ½è¿›å…¬å¸ä¸èƒŒé”…**\n\n#### 7ï¸âƒ£ é…ç½®ç®¡ç†\n\n- ConfigMap\n    \n- Secret\n    \n- ç¯å¢ƒå˜é‡ / æŒ‚è½½\n    \n\n#### 8ï¸âƒ£ æƒé™ä¸å®‰å…¨\n\n- RBAC\n    \n- ServiceAccount\n    \n- kubeconfig\n    \n- å‡†å…¥æ§åˆ¶ï¼ˆçŸ¥é“å³å¯ï¼‰\n    \n\n---\n\n### âš™ï¸ ç¬¬å…«é˜¶æ®µï¼šè°ƒåº¦ã€èµ„æºã€ç¨³å®šæ€§\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ çŸ¥é“ K8s æ€ä¹ˆâ€œç¨³ä½é›†ç¾¤â€**\n\n- requests / limits\n    \n- QoS\n    \n- NodeSelector / Affinity\n    \n- Taints / Tolerations\n    \n- HPAï¼ˆç†è§£åŸç†ï¼‰\n    \n\n---\n\n### ğŸ” ç¬¬ä¹é˜¶æ®µï¼šè¿ç»´ & æ’é”™ï¼ˆå°±ä¸šæ ¸å¿ƒï¼‰\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ èƒ½å®šä½é—®é¢˜**\n\n#### 9ï¸âƒ£ æ—¥å¿— & ç›‘æ§\n\n- kubectl describe / logs\n    \n- äº‹ä»¶ Event\n    \n- Prometheus + Grafanaï¼ˆç†è§£æ¶æ„ï¼‰\n    \n\n#### ğŸ”§ æ’é”™æ€è·¯ï¼ˆå¿…é¡»å½¢æˆæ¨¡æ¿ï¼‰\n\n1. Pod çŠ¶æ€\n    \n2. äº‹ä»¶\n    \n3. å®¹å™¨æ—¥å¿—\n    \n4. èŠ‚ç‚¹çŠ¶æ€\n    \n5. ç½‘ç»œ / å­˜å‚¨\n    \n\n---\n\n### ğŸ— ç¬¬åé˜¶æ®µï¼šé›†ç¾¤éƒ¨ç½² & ç”Ÿäº§å®è·µ\n\nğŸ‘‰ **ç›®æ ‡ï¼šä½ æ˜¯â€œçœŸè¿ç»´â€**\n\n- kubeadm éƒ¨ç½²\n    \n- äºŒè¿›åˆ¶éƒ¨ç½²ï¼ˆä½ å·²ç»åœ¨å¹²ï¼‰\n    \n- é«˜å¯ç”¨ apiserver\n    \n- å¤‡ä»½ etcd\n    \n- é›†ç¾¤å‡çº§\n    \n\n---\n\n## ä¸‰ã€ç»™ä½ ä¸€æ¡â€œç°å®å­¦ä¹ è·¯çº¿â€ï¼ˆä¸ç©ºè°ˆï¼‰\n\n### ğŸ“… æ¨èèŠ‚å¥ï¼ˆæ¯å¤© 6~8 å°æ—¶ï¼‰\n\n- **ç¬¬ 1 æœˆ**ï¼šæ¶æ„ + Pod + æ§åˆ¶å™¨\n    \n- **ç¬¬ 2 æœˆ**ï¼šç½‘ç»œ + å­˜å‚¨ + RBAC\n    \n- **ç¬¬ 3 æœˆ**ï¼šéƒ¨ç½² + æ’é”™ + é¢è¯•æ€»ç»“\n    \n\nğŸ‘‰ æ¯å­¦ä¸€å—ï¼Œéƒ½åšä¸‰ä»¶äº‹ï¼š\n\n1. æ‰‹æ•² YAML\n    \n2. ç”»æµç¨‹å›¾\n    \n3. å†™ 5 å¥é¢è¯•ç­”æ¡ˆ\n    \n\n---\n\n## å››ã€è€å¸ˆç»™ä½ ä¸€å¥å®è¯\n\n> **K8s ä¸éš¾ï¼Œéš¾çš„æ˜¯â€œä½“ç³»æ„Ÿâ€**  \n> ä½ ç°åœ¨çš„çŠ¶æ€ï¼Œå¾ˆé€‚åˆ **ç¡¬å•ƒ 3 ä¸ªæœˆç›´æ¥å†²å²—ä½**ã€‚\n\n---\n\nå¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥å¸®ä½ ï¼š\n\n- ğŸ”¹æŠŠè¿™å¥—æ¡†æ¶æ‹†æˆ **ã€Œæ¯æ—¥å­¦ä¹ æ¸…å•ã€**\n    \n- ğŸ”¹ç›´æ¥æŒ‰ **è¿ç»´é¢è¯•é¢˜é¡ºåºåæ¨å­¦ä¹ **\n    \n- ğŸ”¹ç»™ä½ ä¸€å¥— **K8s é¢è¯•å¿…èƒŒ 100 é—®**\n    \n\n","x":-700,"y":-440,"width":818,"height":740},
		{"id":"d111795f0d3e9cb2","type":"text","text":"ä»¥ä¸‹æ˜¯å¯¹è¿™å¼ å›¾çš„æ¡†æ¶è§£è¯»ï¼š\n\n---\n\n### 1. æ ¸å¿ƒå±‚ï¼šPod ä¸ æ‰©å±•\n\n- **Pod**ï¼šå¤„äºæ­£ä¸­å¿ƒï¼Œæ˜¯ä¸€åˆ‡èµ„æºçš„ç»ˆç‚¹å’Œæ ¸å¿ƒï¼Œæ‰€æœ‰å…¶ä»–ç»„ä»¶éƒ½æ˜¯ä¸ºäº†è®© Pod èƒ½ç¨³å®šè¿è¡Œã€‚\n    \n- **CRD (Custom Resource Definition)**ï¼šå‘ä¸Šå»¶ä¼¸ã€‚é€šè¿‡ Operator æ¨¡å¼ï¼ŒK8s å¯ä»¥è‡ªå®šä¹‰èµ„æºï¼Œå®ç°â€œä¸‡ç‰©çš†å¯è‡ªåŠ¨åŒ–â€ã€‚\n    \n\n### 2. å·¦ç¿¼ï¼šç”Ÿå‘½å‘¨æœŸä¸å‡†å…¥æ§åˆ¶\n\n- **å·¥ä½œè´Ÿè½½ (ç”Ÿäº§è®¡åˆ’éƒ¨)**ï¼š\n    \n    - ç®¡ç† Pod çš„â€œç”Ÿè€ç—…æ­»â€ã€‚æ¯”å¦‚ **Deployment** è´Ÿè´£æ— çŠ¶æ€åº”ç”¨ï¼Œ**StatefulSet** è´Ÿè´£æœ‰çŠ¶æ€åº”ç”¨ï¼ˆå¦‚æ•°æ®åº“ï¼‰ï¼Œ**Job/CronJob** è´Ÿè´£ä¸€æ¬¡æ€§ä»»åŠ¡ã€‚\n        \n- **æœåŠ¡è®¿é—® (é”€å”®éƒ¨)**ï¼š\n    \n    - è´Ÿè´£å¯¹å¤–æ¥å•ã€‚**Service** æä¾›å†…éƒ¨è´Ÿè½½å‡è¡¡ï¼Œ**Ingress** è´Ÿè´£å¤–éƒ¨æµé‡å…¥å£ï¼Œ**CoreDNS** è´Ÿè´£å†…éƒ¨ç‚¹å¯¹ç‚¹ç¿»è¯‘ã€‚\n        \n- **å®‰å…¨ (å®‰ä¿éƒ¨)**ï¼š\n    \n    - ç®¡æƒé™çš„ã€‚**RBAC**ï¼ˆRole, RoleBindingï¼‰å†³å®šäº†è°ï¼ˆUA/SAï¼‰èƒ½å¹²ä»€ä¹ˆï¼Œ**kubeconfig** æ˜¯è¿›é—¨çš„é€šè¡Œè¯ã€‚\n        \n\n### 3. å³ç¿¼ï¼šè¿è¡Œæ”¯æ’‘ä¸ç¯å¢ƒ\n\n- **å­˜å‚¨ (ä»“å‚¨éƒ¨)**ï¼š\n    \n    - Pod çš„â€œç¡¬ç›˜â€ã€‚ä»ç®€å•çš„ **emptyDir** åˆ°æŒä¹…åŒ–çš„ **PV/PVC**ï¼Œä»¥åŠè‡ªåŠ¨åŒ–çš„ **StorageClass**ã€‚\n        \n- **é…ç½® (æ¡£æ¡ˆä¸­å¿ƒ)**ï¼š\n    \n    - ç»™ Pod ä¼ å‚ã€‚**ConfigMap** ä¼ æ™®é€šé…ç½®ï¼Œ**Secret** ä¼ åŠ å¯†ä¿¡æ¯ï¼ˆå¦‚å¯†ç ã€Tokenï¼‰ã€‚\n        \n- **ç½‘ç»œ (é€šä¿¡éƒ¨)**ï¼š\n    \n    - ä¿®è·¯çš„ã€‚**Flannel/Calico/Cilium** è¿™äº›ç½‘ç»œæ’ä»¶ç¡®ä¿ Pod ä¹‹é—´ã€Pod ä¸èŠ‚ç‚¹ä¹‹é—´èƒ½é€šç”µè¯ã€‚\n        \n- **è°ƒåº¦æœºåˆ¶**ï¼š\n    \n    - è´Ÿè´£æŠŠ Pod å®‰ç½®åœ¨æœ€åˆé€‚çš„æœºå™¨ä¸Šã€‚åˆ©ç”¨ **äº²å’Œæ€§**ï¼ˆæƒ³è·Ÿè°ä½ï¼‰ã€**æ±¡ç‚¹/å®¹å¿**ï¼ˆå«Œå¼ƒè°/è°èƒ½å¿å—æˆ‘ï¼‰æ¥ç²¾å‡†æ’ä½ã€‚\n        \n\n### 4. ä¸‹æ–¹ï¼šè¿ç»´ç®¡ç† (åå‹¤ä¿éšœ)\n\nè¿™æ˜¯æœ€ä½“ç°â€œå®æˆ˜è¿ç»´â€çš„éƒ¨åˆ†ï¼Œæ¶µç›–äº†ä»**åŒ…ç®¡ç†ï¼ˆHelmï¼‰**ã€**æ°´å¹³ä¼¸ç¼©ï¼ˆHPAï¼‰**åˆ°**å¤‡ä»½è¿˜åŸ**å’Œ**è¯ä¹¦æ›´æ–°**çš„å®Œæ•´é“¾è·¯ã€‚\n\n---\n","x":180,"y":-440,"width":880,"height":1120}
	],
	"edges":[]
}