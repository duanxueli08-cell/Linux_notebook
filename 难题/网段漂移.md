### 背景说明

```python
- 所在地没有WiFi，只能用手机热点；
- 手机型号是小米13，不能设置热点网段，每次打开的网段是随机的！
- 网段的随机性，使连接的设备必须使DHCP自动获取；
- IP地址不固定，导致两台设备间每次访问都需要先获取对方的IP地址；

面对这个问题如何解决好？能否固定网段网址？或者其它的方案思路？
```

### 解决问题经过

```
- 首先，我是先问的深度，结果差强人意；
- 然后是千问3的max思考模型的深度思考模式，结果也是差强人意，甚至出现审题偏差！
- 接着就是chatgpt和Gemini_pro，不多说，这两个是真的强大！我给满分！
  - chatgpt就不多说了，这里重点说一下 Gemini_Pro，他提供了四种方案，但是有两个方案深得我心！
    方案一：计算机名称代替变动的IP地址；
    方案二：arp -a，以此指令为基础写一个自动化脚本；

- 下面是面对问题提供的思路和方案！
  由于深度太差劲了，我都嫌弃它的信息降低我笔记的质量和信息冗余，所以就不展示它的成果了！
```

我的问题是：
```
我的手机是小米13，现在我两台电脑都链接我手机的热点，但是每次打开热点，ip地址都发生改变，两台电脑在这一个局域网中每次都需要查看ip地址，然后才能远程和传输文件，这个大大增加了我工作量！
另外，我尝试过固定两台电脑的ip地址，但是手机移动热点的网段不固定，比如第一次是：192.168.153.243/24  下次就是：192.168.72.253/24
面对这个问题如何解决好？能否固定网段网址？或者其它的方案思路？
```

#### Gemini_Pro
```
这是一个非常典型且令人头疼的安卓热点机制问题。

简单直接的回答是：在未Root的原生系统（包括小米 HyperOS/MIUI）下，无法直接固定热点的网段和网关 IP。

安卓系统为了避免与周围其它的 Wi-Fi 网络发生 IP 冲突，设计逻辑就是每次开启热点时都会随机分配一个新的子网（例如 `192.168.x.1`，这个 `x` 是随机的）。

虽然不能从手机端“物理”固定 IP，但我们完全可以从连接层或应用层绕过这个问题。针对你的两台电脑互联需求，以下是几种从“青铜”到“王者”级别的解决方案：

### 方案一：使用计算机名（mDNS）——【最简单，无需额外软件】

既然 IP 会变，那就别用 IP，直接用电脑名称。

现代操作系统（Windows 10/11, macOS, 以及安装了 Avahi 的 Linux）都支持 mDNS (Multicast DNS)。

操作方法：
1. 确保两台电脑都连上了手机热点，且在网络设置中将该网络配置为“专用网络”（Private Network），而不是“公用网络”（防止防火墙拦截发现请求）。
2. 查看两台电脑的“计算机名”（Host Name）。
3. 在传输文件或远程桌面时，地址栏直接输入：`计算机名.local`
 例如：电脑A叫 `WorkPC`，电脑B叫 `Laptop`。
 在电脑A上 ping 电脑B：`ping Laptop.local`
 远程桌面地址填：`Laptop.local`




优点：零成本，无需配置。
缺点：跨系统（如 Windows 访问旧版 Linux）有时解析会慢；部分旧软件只认 IP。

---

### 方案二：组建虚拟局域网 (Tailscale / ZeroTier) ——【最推荐，一劳永逸】

这是目前技术圈最主流的解决方案。它的原理是在你的两台电脑上安装一个软件，它们会通过互联网（或局域网打洞）建立一个加密的虚拟网卡。

操作方法：
1. 在两台电脑（甚至你的小米手机）上都安装 Tailscale（或 ZeroTier）。
2. 登录同一个账号。
3. Tailscale 会给每一台设备分配一个永久固定的内网 IP（通常是 `100.x.x.x` 开头）。
4. 以后无论你连的是手机热点、家里的 Wi-Fi 还是星巴克的网，两台电脑之间的互访 IP 永远不变。


优点：
IP 永久固定：彻底解决你的痛点。
无视物理网络：哪怕一台连热点，另一台连隔壁 Wi-Fi，只要有网就能通。
P2P 直连：在同一局域网下（如都连热点），流量是直接走局域网传输的，速度很快，不走服务器中转。


缺点：需要安装客户端。

---

### 方案三：脚本自动化获取 ——【硬核，适合喜欢折腾的人】

如果你不想安装第三方软件，也可以写一个简单的批处理/Shell 脚本，利用 ARP 协议快速找到对方。

思路：
因为热点的子网虽然变，但两台电脑一定在同一个 `/24` 网段下。
操作：
在电脑上运行 `arp -a` 命令。因为刚开热点只有你们两台设备，ARP 列表中除了网关（手机），剩下的那个通常就是另一台电脑。

---

### 方案四：硬件物理固定 ——【便携路由器】

如果你追求极致的稳定，且工作环境允许。

操作方法：
买一个迷你的便携式路由器（Travel Router，如 GL.iNet 等品牌）。
拓扑：手机开启热点 -> 路由器以“中继模式”连接手机热点 -> 两台电脑连接路由器。


优点：路由器的 LAN 口网段是可以固定的（如永久 `192.168.8.x`）。不管手机热点怎么变，路由器对内的局域网永远不变。
缺点：需要多带一个硬件设备。

### 总结建议

1. 不想装软件，马上就要用：试试 方案一 (`hostname.local`)。
2. 追求长期稳定高效的工作流：强烈建议 方案二 (Tailscale)。配置一次，终身受益，再也不用看 IP 地址了。
```

#### ChatGPT
```bash
你这个问题，本质上不是“电脑 IP 变了”，而是 手机热点每次启动都会随机分配一个网段，导致整个小局域网被重建。

你用的是 小米13，它的热点默认行为就是：

 每次开启热点 → 随机生成一个 192.168.x.0/24 网段
 同时重启 DHCP 服务
 所有设备重新拿地址

这不是电脑的问题，是手机在“重新造一个局域网”。

---

# ✅ 解决思路（按实用程度排序）

## 🔥 方案一：别再用 IP 访问，用主机名（最优雅）

你现在的痛点是：

> 每次都要查 IP 才能 SSH / 远程 / 传文件

那就别用 IP。

### 在两台电脑上开启主机名解析：

#### Linux：

安装并启动 avahi

sudo apt install avahi-daemon


访问方式：

ssh Admimistrator@Shirley.local

#### Windows：

 开启网络发现
 设置计算机名
 用：

\\Shirley

或者：
ssh Admimistrator@Shirley


---

### 这背后的技术

这是 mDNS（局域网广播解析）

 不依赖固定 IP
 不依赖固定网段
 不依赖 DHCP

只要在同一个热点下就能解析。

✅ 这是最推荐方案
运维人就应该减少对 IP 的依赖。

---

## 🔥 方案二：固定电脑 IP + 忽略手机网段

你试过，但方法不对。

你不能固定 192.168.153.x

因为手机会变。

但你可以：

 给两台电脑添加一个 额外的静态 IP
 用一个独立网段

比如：

电脑1：
10.10.10.1/24


电脑2：
10.10.10.2/24


这样：

 手机热点负责上网
 你内部通信走 10.10.10.0/24

这个是“多 IP 绑定”。

Linux 示例：
sudo ip addr add 10.10.10.1/24 dev wlan0


优点：

 不受手机网段影响
 永久固定
 专业做法

缺点：

 需要两台机器都配置

但一劳永逸。

---

## 🔥 方案三：手机端是否能固定网段？

结论：
大多数 MIUI 版本不能。

除非：

 Root
 修改热点配置
 或刷第三方 ROM

普通用户基本做不到。

---

## 🔥 方案四：换架构（长期最优解）

说句实在话——

如果你经常这样工作，你应该：

### 买一个小路由器

比如：

 便携路由
 或刷 OpenWRT

手机 → 连接路由 WAN
电脑 → 连接路由 LAN

这样：

 网段固定
 DHCP 固定
 你可以设置静态 IP
 甚至内网 DNS

成本不到 200 块
但你会彻底摆脱这个问题。

长期搞运维，这是更专业的做法。

---

# 🎯 我给你的建议

你是搞运维的，别被这种小问题反复消耗精力。

优先级：

1️⃣ 立即可用 → 用 `.local` 主机名
2️⃣ 稳定内部通信 → 给两台电脑增加第二个静态 IP
3️⃣ 长期 → 上小路由器

---

# 🧠 给你一个思维升级

不要试图“控制手机热点”

而是：

> 让你的内网结构不依赖热点

你现在的架构是：

```
手机 = 网关 + DHCP + 局域网
```

你应该改成：

```
手机 = 只是提供外网
你 = 控制局域网结构
```

这是运维思维。

---

如果你愿意，我可以给你画一个结构图，把三种方案对比给你，让你彻底理解背后的网络逻辑。

```

#### Qwen3-Max-Thinking
```
解决小米13手机热点IP网段不固定问题的方案

您遇到的问题很常见，手机热点每次开启IP网段都会变化，导致需要反复查找IP地址进行远程操作。根据您的小米13手机情况，我提供以下几种解决方案：

方案一：在小米13手机上尝试固定热点IP范围（推荐首选）

小米13系统可能支持固定热点IP范围，操作步骤如下：

进入「设置」>「个人热点」
点击「设置WLAN热点」
查找是否有「IP分配」、「IP范围」或「固定热点IP范围」选项（部分小米机型在"高级设置"中）
如果有，尝试设置为固定网段，例如：192.168.43.0/24
提示：如果找不到这个选项，可以尝试开启开发者模式（进入「设置」>「关于手机」，连续点击「MIUI版本」7次），再返回设置查看是否有更多网络选项

方案二：在电脑上设置静态IP（最可靠且简单的方法）

如果手机无法固定IP，建议在连接热点的电脑上设置静态IP，这样即使手机热点IP变化，您的电脑IP仍保持固定：

Windows电脑设置静态IP：
进入「控制面板」>「网络和共享中心」>「更改适配器设置」
右键点击热点连接 >「属性」>「IPv4」>「使用以下IP地址」
输入：
   IP地址：192.168.43.10（或其他您喜欢的固定IP，但不要与热点IP冲突）
   子网掩码：255.255.255.0
   默认网关：192.168.43.1（热点IP，如果不知道可先查看当前热点IP）
保存设置

Mac电脑设置静态IP：
进入「系统设置」>「网络」
选择热点连接 >「高级」>「TCP/IP」
将「配置IPv4」改为「手动」
输入：
   IP地址：192.168.43.10
   子网掩码：255.255.255.0
   路由器：192.168.43.1
保存设置
重要提示：设置前先查看当前热点的IP地址（在手机热点设置中通常可以看到），确保您设置的IP与热点在同一网段且不冲突

方案三：使用第三方热点管理应用

如果手机自带设置不支持固定IP，可以尝试以下应用：

NetShare PDANet+ WiFi Hotspot：专业热点管理应用，支持固定IP设置
WiFi Hotspot Manager：部分版本支持自定义IP分配

方案四：使用便携式路由器（终极解决方案）

如果上述方法都不理想，建议购买支持4G/5G的便携路由器（如华为随行WiFi），这类设备通常允许：
自定义局域网IP段
提供稳定的IP分配
更好的网络性能和稳定性

附加建议

固定热点频段：在小米13热点设置中，尝试将频段锁定为2.4GHz（而非自动），这有助于稳定IP分配
   进入「设置」>「个人热点」>「高级设置」>「频段」> 选择「2.4GHz」

减少连接设备：将热点连接设备数限制为2台（您目前的使用场景），避免过多设备导致IP分配不稳定

避免使用5GHz频段：5GHz频段的IP分配可能更不稳定，建议始终使用2.4GHz频段

为什么手机热点IP会变化？

手机热点IP变化是正常现象，原因包括：
运营商策略（每次重启热点后重新分配）
手机系统DHCP租期设置（默认通常为24小时）
多设备连接时的IP分配机制

推荐优先使用方案二（在电脑上设置静态IP），这是最简单、最可靠的方法，无需修改手机设置，且能保证您的电脑每次连接热点时都使用固定IP地址，无需每次查找。

希望这些解决方案能帮您解决工作中的困扰！如果尝试后仍有问题，可以告诉我您尝试的具体步骤，我可以提供更针对性的建议。
```